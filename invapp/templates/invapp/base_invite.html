{% load static %}
<!DOCTYPE html>
<!-- THE FIX: The 'dark' class here forces dark mode for any template that extends this file. -->
<html lang="{{ LANGUAGE_CODE }}" class="h-full dark scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}You're Invited{% endblock %}</title>
    <link rel="icon" type="image/png" href="{% static 'invapp/images/favicon.png' %}">
    <link rel="apple-touch-icon" href="{% static 'invapp/images/favicon.png' %}">

    {% with share_image_url="" %}

        {% if event.main_invitation_image %}
            <meta property="og:image" content="{{ event.main_invitation_image.url }}">
            <meta name="twitter:image" content="{{ event.main_invitation_image.url }}">

        {% elif event.couple_photo %}
            <meta property="og:image" content="{{ event.couple_photo.url }}">
            <meta name="twitter:image" content="{{ event.couple_photo.url }}">

        {% elif event.selected_design and event.selected_design.preview_image %}
            <meta property="og:image" content="{{ event.selected_design.preview_image.url }}">
            <meta name="twitter:image" content="{{ event.selected_design.preview_image.url }}">

        {% else %}
            <meta property="og:image" content="{% static 'invapp/images/logo_share.png' %}">
        {% endif %}

    {% endwith %}

    <meta property="og:title" content="{{ event.title }} - Invitație Online" />
    <meta property="og:description" content="Te invităm cu drag la evenimentul nostru! Click pentru detalii și confirmare." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="{{ request.build_absolute_uri }}" />

    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <!-- Block for page-specific fonts -->
    {% block page_specific_fonts %}{% endblock %}

    <!-- 2. Tailwind CSS via CDN (The Easy Way) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 3. Custom Config for Tailwind Colors/Fonts -->
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              'sans': ['Montserrat', 'Poppins', 'Lato', 'sans-serif'],
              'serif': ['Cormorant Garamond', 'Bodoni Moda', 'serif'],
              'script': ['Great Vibes', 'cursive'],
              'display': ['Cinzel Decorative', 'serif'],
              'ticket': ['Oswald', 'sans-serif'],
              'hand': ['Caveat', 'cursive'],
            },
            colors: {
              'brand-bg': '#fdfcf9',
              'brand-text': '#5c5c5c',
              'brand-heading': '#2a2a2a',
              'brand-accent': '#d4afb9',
              'brand-accent-dark': '#b9909b',
              'botanical-green': '#5D7355',
              'gold': '#C5A065',
              'gold-accent': '#f2d6a4',
              'lemon-gold': '#d4af37',
            }
          }
        }
      }
    </script>

    <!-- Block for page-specific CSS styles -->
    {% block page_specific_styles %}{% endblock %}

</head>
<body class="h-full antialiased">
    {% if event.owner.userprofile.plan.show_watermark %}
    <div class="fixed inset-0 z-[9999] pointer-events-none flex items-center justify-center overflow-hidden">

        <div class="opacity-10 rotate-[-15deg] transform select-none">
            <h1 class="text-9xl font-black text-gray-900 tracking-widest whitespace-nowrap">
                DEMO INVAPP
            </h1>
        </div>

        <div class="absolute inset-0 opacity-[0.05]"
             style="background-image: url('{% static 'invapp/images/watermark_pattern.png' %}'); background-repeat: repeat; background-size: 200px;">
        </div>

        <div class="absolute bottom-0 w-full bg-red-600/90 text-white text-center py-2 text-sm font-bold pointer-events-auto shadow-lg backdrop-blur-sm">
            Aceasta este o previzualizare gratuită.
            <a href="/upgrade/" class="underline hover:text-yellow-200 ml-2">
                Activează Planul Premium pentru a elimina watermark-ul.
            </a>
        </div>

    </div>
{% endif %}
    <!-- This is the main content block that your invitation designs will fill. -->
    {% block content %}{% endblock %}

    <!-- This block allows you to add specific JavaScript at the bottom of a page. -->
    {% block extra_js %}{% endblock %}
</body>
</html>


{% extends "invapp/base.html" %}
{% load i18n %}

{% block title %}Feedback - InvApp{% endblock %}

{% block content %}
<div class="flex min-h-full flex-col justify-center px-6 py-12 lg:px-8">
  <div class="sm:mx-auto sm:w-full sm:max-w-sm">
    <h2 class="mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900 dark:text-white">
      {% translate "Share your feedback" %}
    </h2>
    <p class="mt-2 text-center text-sm text-gray-600 dark:text-gray-400">
        {% translate "Your opinion helps us improve the platform." %}
    </p>
  </div>

  <div class="mt-10 sm:mx-auto sm:w-full sm:max-w-sm">
    <form class="space-y-6" method="POST" x-data="{ rating: {{ form.rating.value|default:5 }}, hoverRating: 0 }">
      {% csrf_token %}

      <!-- Rating Interactiv -->
      <div>
        <label class="block text-sm font-medium leading-6 text-gray-900 dark:text-gray-100">{% translate "Rating" %}</label>
        <div class="mt-2 flex items-center justify-center space-x-2 cursor-pointer" @mouseleave="hoverRating = 0">
            <!-- Generăm 5 stele -->
            <template x-for="star in 5">
                <svg
                    @click="rating = star"
                    @mouseenter="hoverRating = star"
                    xmlns="http://www.w3.org/2000/svg"
                    class="h-8 w-8 transition-colors duration-150"
                    :class="(hoverRating >= star || (!hoverRating && rating >= star)) ? 'text-yellow-400 fill-current' : 'text-gray-300 dark:text-gray-600'"
                    viewBox="0 0 24 24" stroke="currentColor" stroke-width="1">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                </svg>
            </template>
        </div>
        <!-- Input-ul ascuns care trimite datele la Django -->
        <input type="hidden" name="rating" :value="rating">
      </div>

      <!-- Text Area (Opțional) -->
      <div>
        <label for="{{ form.text.id_for_label }}" class="block text-sm font-medium leading-6 text-gray-900 dark:text-gray-100">
            {% translate "Message (Optional)" %}
        </label>
        <div class="mt-2">
          {{ form.text }}
        </div>
      </div>

      <div>
        <button type="submit" class="flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
          {% translate "Submit Feedback" %}
        </button>
      </div>
    </form>
  </div>
</div>
{% endblock %}